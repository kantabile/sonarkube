---
title: '"writeObject"가 클래스에서 유일한 "synchronized" 코드여선 안됩니다'
tags: [java, confusing, Major, Code Smell]
---

`synchronization`의 목적은 하나의 스레드에서만 지정된 코드를 실행할 수 있도록 하는 것입니다.
그런 의미에서 `writeObject`를 `synchronized`로 선언해야할 상황이 없습니다. 그런데 클래스내에서 동기화와 관련된 메서드 중, `synchronized` 선언된 유일한 코드가 `writeObject`라면 매우 미심쩍습니다.

### 규칙을 어긴 코드

```java
public class RubberBall {

  private Color color;
  private int diameter;

  public RubberBall(Color color, int diameter) {
    // ...
  }

  public void bounce(float angle, float velocity) {
    // ...
  }

  private synchronized void writeObject(ObjectOutputStream stream) throws IOException { // 규칙을 어긴 코드
    // ...
  }
}
```

### 규칙을 준수한 해결책

```java
public class RubberBall {

  private Color color;
  private int diameter;

   public RubberBall(Color color, int diameter) {
    // ...
  }

  public void bounce(float angle, float velocity) {
    // ...
  }

  private void writeObject(ObjectOutputStream stream) throws IOException {
    // ...
  }
}
```

---

If you like SONARKUBE, don't forget to give me a star. :star2:

> [원문으로 바로가기](https://rules.sonarsource.com/java/tag/confusing/RSPEC-5973)

> [![Star This Project](https://img.shields.io/github/stars/kantabile/sonarkube.svg?label=Stars&style=social)](https://github.com/kantabile/sonarkube)
